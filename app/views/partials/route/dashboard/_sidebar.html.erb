<%#
  # Partial: _sidebar.html.erb
  # Date: 11/20/2025
  # Author: Moisés Reis
  # Package: Meta
  #
  # Description: This partial defines the main navigation sidebar. It stays
  #              glued to the left side of the screen and provides links
  #              to manage different parts of the **Application**.
  #
  # Usage: - What: It acts as the primary menu for the user, showing their
  #                profile and all available management sections.
  #        - How: It uses a sticky sidebar layout. It renders a profile
  #               area followed by dynamic lists of links generated
  #               by the **crud_nav_for** helper.
  #        - Why: It ensures the user never gets lost by keeping essential
  #               tools and navigation options visible at all times.
  %>
<aside class="flex flex-col justify-start items-center h-screen w-64 max-w-64 max-h-screen sticky overflow-y-scroll top-0 [&>div]:px-0 [&>div]:flex [&>div]:flex-col [&>div]:items-start [&>div]:justify-center [&>div]:gap-1.5 bg-neutral-50 border-r border-border px-3 py-3">

  <div class="h-16 bg-transparent items-center justify-start w-full !px-6">

    <div class="flex flex-row items-center justify-between gap-1 w-full">
      <%= render "partials/modules/logo", size: 24 %>
    </div>
  </div>

  <div class="flex flex-col h-full !justify-between [&>div]:flex [&>div]: [&>div]:flex-col [&>div]:!gap-9 [&>div]:!py-6 [&>div]:items-center [&>div]:justify-center [&>div]:w-full [&>div>div]:w-full [&>div>div]:space-y-1.5">

    <div>

      <div>
        <%= link_to authenticated_root_path,
                    class: "button button-outline w-full button-small flex justify-start" do
        %>
          <%= inline_svg_tag "icons/home.svg" %>
          <%= content_tag(:span, "Início") %>
        <% end %>

        <%= button_to destroy_user_session_path,
                      method: :delete,
                      data: {
                        turbo_confirm: "Tem certeza que deseja sair?"
                      },
                      class: "button button-danger w-full button-small flex justify-start",
                      form: { style: "display: flex; align-items: center;" } do %>
          <%= inline_svg_tag "icons/log-out.svg" %>
          <%= content_tag(:span, "Sair") %>
        <% end %>
      </div>

      <%# Explanation:: This section generates menus for each data category.
      #               It creates buttons to list existing items or add
      #               new ones for every model like Portfolios or Users.
      %>
      <%= crud_nav_for Portfolio,
                       singular: "Carteira",
                       plural: "Carteiras",
                       icons: {
                         index: "wallet.svg",
                         new: "plus.svg"
                       } %>
      <%= crud_nav_for User,
                       singular: "Usuário",
                       plural: "Usuários",
                       icons: {
                         index: "users.svg",
                         new: "plus.svg"
                       } %>
      <%= crud_nav_for InvestmentFund,
                       singular: "Fundo",
                       plural: "Fundos",
                       icons: {
                         index: "chart-pie.svg",
                         new: "plus.svg"
                       } %>
      <%= crud_nav_for FundInvestment,
                       singular: "Alocação",
                       plural: "Alocações",
                       icons: {
                         index: "badge-percent.svg",
                         new: "plus.svg"
                       } %>
      <%= crud_nav_for Application,
                       singular: "Aplicação",
                       plural: "Aplicações",
                       icons: {
                         index: "arrow-left-right.svg",
                         new: "plus.svg"
                       } %>
      <%= crud_nav_for Redemption,
                       singular: "Resgate",
                       plural: "Resgates",
                       icons: {
                         index: "circle-minus.svg",
                         new: "plus.svg"
                       } %>
      <%= crud_nav_for NormativeArticle,
                       singular: "Norma",
                       plural: "Normas",
                       icons: {
                         index: "scale.svg",
                         new: "plus.svg"
                       } %>
      <%= crud_nav_for FundValuation,
                       singular: "CVM",
                       plural: "CVM",
                       icons: {
                         index: "calendar-setting.svg",
                         new: "plus.svg"
                       } %>
      <%= crud_nav_for EconomicIndex,
                       singular: "Índice",
                       plural: "Índices",
                       icons: {
                         index: "trending-up.svg",
                         new: "plus.svg"
                       } %>
      <%= crud_nav_for EconomicIndexHistory,
                       singular: "Histórico",
                       plural: "Históricos",
                       icons: {
                         index: "calendar-clock.svg",
                         new: "plus.svg"
                       } %>
    </div>
  </div>
</aside>