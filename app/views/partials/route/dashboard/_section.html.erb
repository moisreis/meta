<% columns ||= 2 %>

<% grid_classes = {
                    1 => "grid-cols-1",
                    2 => "grid-cols-1 md:grid-cols-2",
                    3 => "grid-cols-1 md:grid-cols-2 lg:grid-cols-3",
                    4 => "grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",
                    5 => "grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",
                    6 => "grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"
                  }[columns] || "grid-cols-1 sm:grid-cols-2 lg:grid-cols-3" %>

<% has_action ||= false %>

<% button_route ||= nil %>

<% button_name ||= nil %>

<% button_icon ||= nil %>

<% section_title ||= nil %>

<% section_desc ||= nil %>

<section class="flex flex-col gap-6 justify-start ">

  <div class="flex flex-row items-center justify-between">

    <%# Explanation:: This block displays the title if one is provided.
      #               It ensures that empty headings do not take up
      #               unnecessary space on the dashboard screen.
      %>
    <% if section_title.present? %>

      <div class="flex flex-col justify-start items-start gap-1.5">
        <div class="flex flex-row justify-start items-center gap-1">
          <%= content_tag :h2, section_title, class: "text-2xl font-body text-body font-medium capitalize" %>

          <% if section_desc.present? %>

            <%= button_tag class: 'button-ghost !p-1 section-desc-button',
                           data: {
                             tippy_target: "##{section_title.parameterize}-desc"
                           } do
            %>
              <%= inline_svg_tag "icons/information-circle.svg", class: "!stroke-muted size-3" %>
            <% end %>
          <% end %>
        </div>

        <% if section_desc.present? %>

          <%= content_tag :h2, section_desc, class: "text-sm text-muted font-normal" %>
        <% end %>
      </div>

      <%# Explanation:: This hidden container holds the description text.
        #               It remains invisible until the user interacts with
        #               the info button to keep the layout clean.
        %>
      <div class="section-desc" id="<%= section_title.parameterize %>-desc" style="display: none;">
        <%= content_tag :h2, section_desc, class: "text-sm text-muted text-left" %>
      </div>
    <% end %>

    <%# Explanation:: This conditional shows the action button if requested.
      #               It creates a clickable link with an icon and text
      #               to allow the user to perform tasks in this section.
      %>
    <% if has_action == true %>
      <%= link_to button_route, class: "button button-small button-outline" do %>
        <%= inline_svg_tag "icons/#{button_icon}.svg" %>
        <%= content_tag :span, button_name %>
      <% end %>
    <% end %>
  </div>

  <%# Explanation:: This is the main area where the section content lives.
    #               It uses the grid classes defined earlier to organize
    #               any nested elements passed into this block.
    %>
  <div class="grid <%= grid_classes %> gap-6">
    <%= yield %>
  </div>
</section>