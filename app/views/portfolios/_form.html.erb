<%#
  # Partial: _form.html.erb
  # Date: 11/20/2025
  # Author: Moisés Reis
  # Package: Meta
  #
  # Description: This file creates a form used to manage financial portfolios,
  #              allowing users to name their assets and share access with
  #               other people.
  #
  # Usage:: - What: A standardized input layout for creating or modifying
  #                **Portfolio** records in the database.
  #         - How: It uses **form_with** to handle data and includes modules
  #                for text, selection, and radio buttons.
  #         - Why: It ensures that user data is gathered consistently and
  #                provides a clear path for saving information.
  %>

<%# Explanation:: This tag initializes the form to capture and send portfolio
  #               data to the server; it is used during creation or editing
  #               and works by binding input fields to the Portfolio model.
  %>
<%= form_with(model: portfolio, class: "contents") do |form| %>

  <%# Explanation:: This layout block groups identification fields to keep
    #               the interface organized; it is used to separate identity
    #               data and works by rendering a titled frame around the input.
    %>
  <%= render "partials/blocks/fieldset",
             fieldset_title: "Identificação",
             fieldset_desc: "Defina o nome principal para organizar sua nova carteira." do %>

    <%# Explanation:: This module creates a text box for the user to type a
      #               descriptive name; it is used to label the portfolio and
      #               works by rendering a standard HTML input with a wallet icon.
      %>
    <%= render "partials/modules/input-field",
               f: form,
               name: :name,
               label: "Nome da carteira",
               placeholder: "Carteira de Longo Prazo",
               desc: "Escolha um nome claro e descritivo.",
               field_type: :text_field,
               icon_name: "wallet"
    %>

    <%= render "partials/modules/input-field",
               f: form,
               name: :annual_interest_rate,
               label: "Taxa de juros anual (%)",
               placeholder: "10.00",
               desc: "Juros anuais que compõem a meta da carteira (ex: 10.00 para 10% a.a.).",
               field_type: :number_field,
               icon_name: "percent",
               step: :any
    %>
  <% end %>

  <%# Explanation:: This hidden field automatically assigns the current user
    #               as the primary owner; it is used to ensure data integrity
    #               and works by sending the user's ID without requiring an input box.
    %>
  <%= form.hidden_field :user_id,
                        value: current_user.id
  %>

  <%# Explanation:: This button triggers the submission to save all entered
    #               information; it is used to complete the form process and
    #               works by sending the gathered data to the server via a click.
    %>
  <%= form.button :submit,
                  name: nil,
                  class: "button button-primary w-fit flex items-center gap-2" do
  %>
    <%= inline_svg_tag "icons/#{icon_name}.svg" %>
    <%= content_tag :span, button_name %>
  <% end %>
<% end %>