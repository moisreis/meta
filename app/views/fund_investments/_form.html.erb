<%#
  # Partial: _form.html
  # Date: 11/23/2025
  # Author: Moisés Reis
  # Package: Meta
  #
  # Description: Renders the structured form fields for creating or editing a
  #              FundInvestment entry. It captures allocation details, invested
  #              values, and associations to both a portfolio and an investment fund.
  #
  # Usage: - What: Displays the required input fields to record how a fund is allocated
  #                within a specific portfolio.
  #        - How: Uses `form_with` and UI modules such as `input-field` to keep UI
  #               consistent across the application.
  #        - Why: Centralizes FundInvestment input logic, ensuring uniform layout and
  #               validation behavior on both new and edit views.
  %>
<%= form_with(model: fund_investment, class: "contents") do |form| %>
  <div class="grid grid-cols-2 gap-6">
    <%= render "partials/modules/select",
               f: form,
               name: :investment_fund_id,
               label: "Fundo de investimento",
               options_collection: @investment_funds.map { |fund| [fund.fund_name, fund.id] },
               is_half_width: false,
               desc: "Escolha o fundo que está sendo alocado.",
               is_inactive: false,
               icon_name: ""
    %>
    <%= render "partials/modules/select",
               f: form,
               name: :portfolio_id,
               label: "Carteira",
               options_collection: @portfolios.map { |p| [p.name, p.id] },
               is_half_width: false,
               desc: "Escolha a carteira que receberá a alocação.",
               is_inactive: false
    %>
  </div>
  <%= render "partials/modules/separator" %>
  <div class="grid grid-cols-2 gap-6">
    <%= render "partials/modules/input-field",
               f: form,
               name: :percentage_allocation,
               label: "Alocação",
               placeholder: "Ex: 12.5",
               is_half_width: false,
               desc: "Percentual da carteira alocado neste fundo.",
               field_type: :number_field,
               icon_name: "percent_discount"
    %>
    <%= render "partials/modules/input-field",
               f: form,
               name: :total_invested_value,
               label: "Valor total investido",
               placeholder: "Ex: 10000.00",
               is_half_width: false,
               desc: "Valor monetário investido.",
               field_type: :number_field,
               icon_name: "attach_money"
    %>
    <%= render "partials/modules/input-field",
               f: form,
               name: :total_quotas_held,
               label: "Cotas possuídas",
               placeholder: "Ex: 150.75",
               is_half_width: false,
               desc: "Total de cotas do fundo em posse.",
               field_type: :number_field,
               icon_name: "layers"
    %>
  </div>
  <%= form.button :submit,
                  name: nil,
                  class: "button button-primary w-fit flex items-center gap-2" do %>
    <%= inline_svg_tag "icons/#{icon_name}.svg" %>
    <%= content_tag :span, button_name %>
  <% end %>
<% end %>

