<%#
  # Partial: _form.html.erb
  # Date: 11/20/2025
  # Author: Moisés Reis
  # Package: Meta
  #
  # Description: Defines the input structure and submission mechanism for the User resource.
  #              It includes required fields for identification and authentication (email,
  #              names, and passwords) and arranges them logically for user input.
  #
  # Usage:: - What: Renders the standardized form necessary for creating or updating
  #                a User object. It requires the 'user' model instance.
  #         - How: Utilizes the Rails **form_with** helper and organizes fields using
  #                the **fieldset** and **input-field** modules.
  #         - Why: Provides a consistent and reusable form for managing user data,
  #                ensuring logical grouping and a uniform UI.
  %>

<%# Explanation:: This tag initializes the form to collect and send user details
  #               to the database; it is used during account creation or profile
  #               updates and works by mapping inputs directly to the User model.
  %>
<%= form_with(
      model: user,
      class: "contents") do |form| %>

  <%# Explanation:: This fieldset creates a specific area for electronic contact
    #               information to ensure proper login identity; it is used to capture
    #               the account's unique key and works by wrapping the email input in a
    #               titled layout.
    %>
  <%= render "partials/blocks/fieldset",
             fieldset_title: "E-mail",
             fieldset_desc: "Informe seu endereço de contato principal.",
             fieldset_icon: "arrow-up-right" do %>

    <%# Explanation:: This module renders a specialized email text box to ensure
      #               data follows valid web formats; it is used to prevent typos in
      #               contact info and works by triggering an email-specific keyboard.
      %>
    <%= render "partials/modules/input-field",
               f: form,
               name: :email,
               label: "Informe seu e-mail",
               field_type: :email_field,
               placeholder: "seuemail@email.com",
               desc: "Informe um e-mail válido",
               icon_name: "at-sign"
    %>
  <% end %>

  <%# Explanation:: This section groups personal name fields to personalize
    #               the user experience; it is used to identify the person behind
    #               the account and works by organizing first and last name inputs
    #               side-by-side.
    %>
  <%= render "partials/blocks/fieldset",
             fieldset_title: "Dados do usuário",
             fieldset_desc: "Utilizamos esses nomes para personalizar sua experiência.",
             fieldset_icon: "arrow-up-right" do %>

    <%# Explanation:: This line provides a text input for the user's primary name
      #               to improve system interactions; it is used during registration
      #               and works by saving the first part of the user's identity.
      %>
    <%= render "partials/modules/input-field",
               f: form,
               name: :first_name,
               label: "Primeiro nome",
               field_type: :text_field,
               placeholder: "Maria",
               desc: "Informe seu primeiro nome",
               icon_name: "user-round-pen"
    %>

    <%# Explanation:: This line creates a field for the user's surname to complete
      #               their profile; it is used to distinguish individuals with
      #               similar first names and works by capturing the family name.
      %>
    <%= render "partials/modules/input-field",
               f: form,
               name: :last_name,
               label: "Último nome",
               field_type: :text_field,
               placeholder: "Silva",
               desc: "Informe seu último nome",
               icon_name: "user-round-pen"
    %>
  <% end %>

  <%# Explanation:: This block manages secret credentials to protect account
    #               privacy; it is used to set or change security keys and works
    #               by grouping the password entry with a confirmation field for
    #               validation.
    %>
  <%= render "partials/blocks/fieldset",
             fieldset_title: "Senha",
             fieldset_desc: "Sua senha deve ser mantida em segredo.",
             fieldset_icon: "arrow-up-right" do %>

    <%# Explanation:: This module creates a hidden text field to secure the user's
      #               chosen key; it is used to establish account protection and
      #               works by masking characters as they are typed on the screen.
      %>
    <%= render "partials/modules/input-field",
               f: form,
               name: :password,
               label: "Crie uma senha",
               field_type: :password_field,
               placeholder: "SuaSenha123@",
               desc: "Crie uma senha segura com, pelo menos, 6 caracteres",
               icon_name: "key"
    %>

    <%# Explanation:: This second password field verifies that the user did not
      #               make a mistake during entry; it is used to avoid account
      #               lockouts and works by checking if the text matches the first
      #               password exactly.
      %>
    <%= render "partials/modules/input-field",
               f: form,
               name: :password_confirmation,
               label: "Confirme sua senha",
               field_type: :password_field,
               placeholder: "SuaSenha123@",
               desc: "Repita sua senha",
               icon_name: "key"
    %>
  <% end %>

  <%# Explanation:: This button executes the data transfer to the application
    #               server to finalize the task; it is used to commit changes
    #               and works by triggering the form's submission process.
    %>
  <%= form.button :submit,
                  class: "button button-primary w-fit flex items-center gap-2" do
  %>
    <%= inline_svg_tag "icons/#{icon_name}.svg" %>
    <%= content_tag :span, button_name %>
  <% end %>
<% end %>